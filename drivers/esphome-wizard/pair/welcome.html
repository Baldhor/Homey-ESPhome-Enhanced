<!--
    Allows to choose between
    - Connection to a new physical device
    - Update of an existing physiocal device
-->
<script src="logme.js"></script>
<script type="application/javascript">
    Homey.setTitle(Homey.__('wizard.welcome.title'));
    Homey.setNavigationClose();
</script>
<header class="homey-header">
    <p class="homey-subtitle" data-i18n="wizard.welcome.description">
        <!-- This field will also be translated -->
    </p>
</header>
<div class="homey-form-group">
    <button id="new_device" class="homey-button-primary-full" data-i18n="wizard.welcome.new"
        onclick="onClickNewDevice(event);"></button>
    <br>
    <button id="update_device" class="homey-button-primary-full" data-i18n="wizard.welcome.update"
        onclick="onClickUpdateDevice(event);"></button>
    <br>
    <button id="update_device_class" class="homey-button-primary-full" data-i18n="wizard.welcome.updateDeviceClass"
        onclick="onClickUpdateDeviceClass(event);"></button>
</div>
<script>
    /***************
     * HTML Events *
     ***************/

    function onClickNewDevice(event) {
        wizardlog('onClickNewDevice:', ...arguments);


        Homey.setViewStoreValue('store', 'mode', 'new_physical_device').then(() => {
            Homey.showView('new_device');
        });
    }

    function onClickUpdateDevice(event) {
        wizardlog('onClickUpdateDevice:', ...arguments);

        Homey.setViewStoreValue('store', 'mode', 'existing_physical_device').then(() => {
            Homey.showView('update_device');
        });
    }

    function onClickUpdateDeviceClass(event) {
        wizardlog('onClickUpdateDeviceClass:', ...arguments);

        Homey.showView('conf_deviceclass');
    }

    // Let's make the small window larger!
    wizardlog('To make the driver window larger, type the following code in the console:');
    wizardlog('while (window.parent.document.querySelector("[data-is-small-view=true]") !== null) {document.querySelector("[data-is-small-view=true]").attributes["data-is-small-view"].nodeValue = "false";}');
</script>