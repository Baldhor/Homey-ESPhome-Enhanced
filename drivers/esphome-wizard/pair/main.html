<script src="includes/constants.js"></script>
<script src="includes/logme.js"></script>
<script src="includes/front_utils.js"></script>
<script src="includes/petite-vue.js"></script>
<link rel="stylesheet" href="includes/styles.css">


<!-- ************************
     * Load common components
     ************************ -->

<!-- Configuration -->
<script src="common-components/configuration.js"></script>
<!-- Page handler -->
<script src="common-components/page-handler.js"></script>
<!-- Error and Warning list -->
<script src="common-components/error-and-warning-list.js"></script>
<div hidden w3-include-html="common-components/error-and-warning-list.html"></div>


<!-- ************************
     * Init pages
     ************************ -->

<!-- Main page -->
<script src="page-components/main-page.js"></script>
<div hidden w3-include-html="page-components/main-page.html"></div>

<!-- List virtual devices page -->
<script src="page-components/list-virtual-devices-page.js"></script>
<div hidden w3-include-html="page-components/list-virtual-devices-page.html"></div>

<!-- Edit virtual device page -->
<script src="page-components/edit-virtual-device-page.js"></script>
<div hidden w3-include-html="page-components/edit-virtual-device-page.html"></div>

<!-- Edit capability page -->
<script src="page-components/edit-capability-page.js"></script>
<div hidden w3-include-html="page-components/edit-capability-page.html"></div>

<!-- List physical devices page -->
<script src="page-components/list-physical-devices-page.js"></script>
<div hidden w3-include-html="page-components/list-physical-devices-page.html"></div>

<!-- Edit physical device page -->
<script src="page-components/edit-physical-device-page.js"></script>
<div hidden w3-include-html="page-components/edit-physical-device-page.html"></div>

<!-- console-re page -->
<script src="page-components/console-re-page.js"></script>
<div hidden w3-include-html="page-components/console-re-page.html"></div>


<!-- ************************
     * Force load HTML files
     ************************ -->
<script src="includes//include-html.js"></script>
<script>
  includeHTML();
</script>


<!-- ************************
     * Init app
     ************************ -->
<div v-scope :class='{ esphomewizard : true }' id='esphomewizard' hidden @vue:mounted="mounted($el)">
  <section id="main-page" v-scope="MainPage()"></section>
  <section id="list-virtual-devices-page" v-scope="ListVirtualDevicesPage()"></section>
  <section id="edit-virtual-device-page" v-scope="EditVirtualDevicePage()"></section>
  <section id="edit-capability-page" v-scope="EditCapabilityPage()"></section>
  <section id="list-physical-devices-page" v-scope="ListPhysicalDevicesPage()"></section>
  <section id="edit-physical-device-page" v-scope="EditPhysicalDevicePage()"></section>
  <section id="console-re-page" v-scope="ConsoleRePage()"></section>
</div>

<script>
  wizardlog('Create app');
  Homey.setNavigationClose();

  PetiteVue.createApp({
    pageHandler,
    configuration,
    errorAndWarningList,
    mounted(el) {
      wizardlog('app mounted');

      // TODO: Show welcome page if needed!
      pageHandler.setMainPage();

      el.hidden = false;
    }
  }).mount();

  wizardlog('Create app done');
</script>